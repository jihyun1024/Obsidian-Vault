이산 코사인 변환(Discrete Cosine Transform)의 약자로, 이미지 압축의 핵심 기술이다. 
이미지 데이터를 주파수 성분으로 변환한 후 시각적으로 덜 중요한 정보를 제거하여 PNG와 대비되는 JPG의 특성인 손실 압축을 가능하게 한다. 

참고 사이트: [2차원 DCT(Discrete cosine transform), 이산 코사인 변환](https://vir-us.tistory.com/entry/2%EC%B0%A8%EC%9B%90-DCTDiscrete-cosine-transform-%EC%9D%B4%EC%82%B0-%EC%BD%94%EC%82%AC%EC%9D%B8-%EB%B3%80%ED%99%98#google_vignette)
### DCT란
공간 영역의 픽셀 값을 주파수 영역의 성분으로 변환하는 수학적 변환으로, 이 변환을 통해 저주파(부드러운 변화 = 근처 픽셀과 차이가 작음)와 고주파(급격한 변화, 디테일 = 근처 픽셀과 차이가 큼)를 분리할 수 있다. 

![[Pasted image 20250909014332.png]]
예를 들면, 나무와 하늘이 같이 찍힌 사진에서 해당 사진을 주파수 영역으로 변환하게 되면 나뭇잎들 각각의 인접 픽셀은 저주파를 가지며, 나뭇잎과 하늘의 인접 픽셀은 고주파를 가지게 된다. 
이 때 나뭇잎들 사이에 갑자기 다른 색이 추가되면 우리의 눈은 해당 색이 다른 색임을 쉽게 인지할 수 있다. 인접한 색과 확연하게 다른 색을 가지기 때문이다. 
그런데, 나뭇잎과 하늘 사이에 다른 색이 들어오면 애초에 그 지점은 색이 바뀌는 지점이기 때문에 그 차이를 잘 느끼지 못한다. 

해당 원리를 이용해 저주파 성분은 유지하고 고주파 성분을 줄이는 방식으로 JPEG에서는 2차원 DCT를 사용하며, 일반적으로 8 x 8 블록 단위로 처리한다.

### JPEG에서 이미지 압축 처리 과정
1. 색상 공간 변환
	RGB 색 공간을 YCbCr 색 공간으로 다음처럼 변환한다.
	![[Pasted image 20250710164924.png|380 x 330]]
2. 샘플링: 일반적으로 크로마 서브샘플링을 적용해 Cb, Cr 성분의 해상도를 줄여 데이터의 양을 감소시킨다. 
	- 크로마 서브샘플링: 인간의 눈이 밝기에는 민감하지만, 색상에는 상대적으로 민감하지 않다는 점을 이용해 Y 성분은 유지하고, Cb, Cr 성분의 해상도를 줄임
3. 블록 분할: 이미지를 8 x 8 픽셀 블록으로 분할해 각 블록 단위로 독립적으로 이미지를 처리
4. DCT 적용: 다음의 수식으로 각 블록에 2차원 DCT를 수행한다.
	이 때 $F(u, v)$는 DCT 변환된 주파수 계수이며, $f(x, y)$는 원래의 픽셀 값이다. 
	또한 $C(u) = \frac{1}{\sqrt{2}}$ if $u = 0$이며, 아닐 경우 $C(u) =1$이다. 
	![[Pasted image 20250905065301.png]]
	역변환도 이와 비슷하게 수행할 수 있다. 
	이후 저주파 성분은 행렬의 왼쪽 위에, 고주파 성분은 오른쪽 아래에 몰리게 된다. 
	![[Pasted image 20250909021951.png|300x300]]
	또한 해당 행렬에서 (0, 0) 위치의 계수는 다른 계수들과 달리 **DC 계수**라고 해서 해당 블록 전체의 명도를 결정하며 나머지 63개의 계수는 **AC 계수**라고 한다. 
5. 양자화
	시각적으로 덜 중요한 고주파 성분을 처리해 (각 계수를 양자화 테이블로 나눈 뒤 반올림 수행 > 많은 고주파 성분이 0이 됨) 손실 압축을 구현한다.
	
	즉, 위의 나무 사진에서는 나무와 하늘의 경계 = 고주파 부분의 데이터는 손실되며, 나뭇잎과 나뭇잎의 경계 = 저주파 부분의 데이터는 그대로 살아남아 저장된다. 
	![[Pasted image 20250909024212.png]]
6. Huffman Coding
	이후 8 x 8 DCT 계수를 저주파에서 고주파 순서로 1차원 배열로 재배열하며, 해당 배열을 런 렝스 부호화를 통해 같은 값이 연속해서 나타나는 것을 그 개수와 반복되는 값으로 표현하며, 해당 (런, 크기) 쌍을 하나의 심볼로 취급한 것을 [[DEFLATE 압축 알고리즘#2. Huffman Coding (통계적 부호화)|Huffman Coding]]을 이용해 더 압축한다. 

### DCT의 장점
1. 대부분의 정보가 저주파에 집중되어 고주파를 제거해도 눈으로 보이는 품질의 저하가 적다. 
2. 양자화와 Huffman Coding으로 높은 압축률을 구현할 수 있다. 
3. 2차원 DCT의 경우, 행에 1차원 DCT를 적용 후 열에 1차원 DCT를 적용하는 방식으로 계산할 수 있어 구현이 편리하다. 
4. 코사인 함수만 쓰기 때문에 복소수가 나오지 않아 단순하다.

### DCT의 단점
1. 강한 양자화 시 블록 간의 경계가 눈에 띈다. 
2. 경계선 주변에 고주파의 손실로 인해 잔상 (= 디지털 풍화)이 발생한다.