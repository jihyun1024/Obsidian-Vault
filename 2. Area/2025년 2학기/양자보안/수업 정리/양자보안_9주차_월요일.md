---
tags:
  - 수업_정리
  - 암호학
title:
---
## 학습 주제
1. PQC: Kyber 소개
2. PQC: Dilithium 소개
3. PQC: Mathematical Background

---
## 연관 수업
(연관된 수업의 노트 링크 연결)

---
## 수업과 관련한 질문 3가지
1. ML-KEM 알고리즘의 수학적 안전성인 Distinguished Module-LWE 문제가 무엇인지
2. 격자라는 것이 정확히 어떤 개념을 지칭하는지
3. ML-KEM에서 encapsulation key와 decapsulation key가 어떻게 수학적으로 연관되어 있는지

---
## 강의 요약
중간고사 끝나고 9주차부터 본격적으로 PQC, 그 중에서도 KYBER와 DILITHIUM에 대하여 다룬다.
### PQC: Kyber 소개
**CRYSTALS-KYBER**는 **CRYSTALS_DILITHIUM**과 함께 Lattice-Based PQC로, Distinguished Module-LWE 문제의 어려움에 기반을 두고 있다. 

KYBER (ML_KEM)의 동작 구조는 다음 그림과 같다.
![[Pasted image 20251028023500.png]]
여기서 별표 친 부분이 중요한 부분으로, KeyGen은 키 교환을 위한 encapsulation key와 decapsulation key를 생성하는 과정이며, Decaps는 decapsulation key로 ciphertext (여기서는 encapsulation key로 암호화된 것)를 복호화하는 과정이다.

이 강의의 목표는 해당 과정 내부에서 어떤 일들이 벌어지는가를 아는 것이다. 

KeyGen, Encaps, Decaps 각 과정을 알고리즘으로 나타내면 다음과 같다 (그림이 작긴 하지만, 나중에 자세하게 배울 것이다)
![[Pasted image 20251028023836.png]]
![[Pasted image 20251028023900.png]]
![[Pasted image 20251028023913.png]]
이 그림들에서 공통적으로 나타나는 표현은 **다항식 차수**라는 표현과 **mod q**라는 표현인데, 이에 관련된 내용은 밑의 수학적 배경에서 다룰 것이다. 

### PQC: Dilithium 소개
CRYSTALS-DILITHIUM도 Lattice-Based이며, ML-DSA라고도 한다. 

DILITHIUM에서도 동작 과정을 사진으로 나타낸 것은 다음과 같다. 
![[Pasted image 20251028024324.png]]
![[Pasted image 20251028024338.png]]
![[Pasted image 20251028024348.png]]
여기서 KYBER와 DILITHIUM은 modular q를 서로 다르게 사용한다는 것을 확인할 수 있다. 
KYBER와 DILITHIUM은 q로 소수를 사용하지만, KYBER는 3329를, DILITHIUM은 8390417을 쓴다. 

이쯤에서 기존 공개키 암호 알고리즘과 PQC 알고리즘을 비교해 보자. 
![[Pasted image 20251028024655.png]]
이 사진은 서명 알고리즘에서 PQC와 기존 공개키 암호의 크기를 서로 비교한 것이다. 보면 알 수 있듯이 byte 수는 PQC가 압도적으로 크다. 그러나, PQC로 전환하려는 이유는 RSA, ECC가 양자컴퓨터의 공격으로부터 안전하지 않기 때문에 byte 수가 몇 천, 몇 만임에도 불구하고 PQC를 만들고 사용하는 것이다. 

그러면, 더 깊게 들어가서 수학적인 배경을 확인해 보자. 

### PQC: Mathematical Background
정수론이나 대수학 수업을 잘 들었다면 알 수 있는 개념으로 모듈러 산술(Modular Arithmetic)이란 개념이 있다. 

이는 유한한 컴퓨터의 저장 공간에 무한한 수를 담기 위한 개념으로, 쉽게 말하면 정수 공간 전체를 하나의 수로 n등분하는 개념이다. 

예를 들어 17이라는 수를 골랐다면, 전체를 $Z_{17}$이라 표현할 수 있으며 $2 = -15 = 19 = 36$ 으로, 17이 넘거나 0 밑으로 내려가는 수들을 2라는 하나의 조로 묶을 수 있다. 
이는 단순히 원소의 표현에서만 그치는 게 아니라 덧셈, 뺄셈, 곱셈, 나눗셈 등등 사칙연산에도 적용되어 $Z_{17}$ 내부의 두 수를 연산하면 그 결과 또한 $Z_{17}$ 로 떨어지는 좋은 성질을 가지고 있다. 
![[Pasted image 20251028025521.png]]

이 개념을 응용해서 **Symmetric mod**라는 개념을 생각할 수 있다. 
고르는 수인 $q$가 홀수일 때, $r\ mods\ q$는 $mod$라는 단어에 symmetric을 의미하는 $s$가 붙은 것으로, 전체 $Z_q$ 를 반으로 가른 뒤, $\frac{q-1}{2}$보다 작다면 그대로 표시하고, $\frac{q-1}{2}$보다 크면 그 숫자에서 $q$를 뺀 음수 값으로 처리하는 방식이다. 
$Z_{17}$ 을 예시로 들면 다음 사진과 같다. 
![[Pasted image 20251028030056.png]]

이는 고르는 수가 짝수일 때도 비슷하게 처리할 수 있다. (이름만 조금 바꿔서 Symmetric mod: q even 이런 식으로)
![[Pasted image 20251028030201.png]]

이보다 더 복잡한 개념이 등장하는데, 바로 **다항식 환 (Polynomial Ring)** 이라는 개념이다.

$q$ 를 우리가 고른 소수라고 하자. (ML_KEM에서는 이 값이 3329이다)
이 때 $Z_q[x]$는 $Z_q$를 계수로 가지는 모든 다항식들의 집합으로, 차수는 제한이 없다. 따라서, $Z_q[x]$ 내에서 일어나는 모든 다항식 사칙연산의 결과값의 계수는 전부 $Z_q$에 속하게 된다. 

덧셈, 뺄셈은 상관 없지만, 만약 곱셈을 계속 하게 된다면 **차수가 계속 늘어날 수 있다**. 이는 구현 관점에서 메모리를 무한정으로 사용하는 것과 마찬가지이기 때문에, $Z$와 $Z_{17}$의 관계처럼 어딘가 끊어주는 역할을 하는 것이 필요하다. 

그게 Polynomial ring의 개념으로, Polynomial ring $R_q = Z_q[x]/(x^n + 1)$은 $n$차보다 작은 $Z_q[x]$ 내부의 다항식으로 이루어진 집합이며, 이 집합의 원소 간 곱셈의 결과 또한 $R_q$로 떨어진다. 
ML-KEM의 경우, $q = 3329$, $n = 256$을 사용하며, 이는 ML-KEM에서 사용하는 Polynomial ring이 $Z_{3329}[x] / (x^{256} + 1)$이라는 것을 의미한다. 따라서 0부터 3328까지를 계수로 가지는 항이 최대 256개의 항(상수항 포함)이며, 이로 인해 메모리 부족의 문제는 해결되게 된다. 

---
## 중요한 단어
1. CRYSTALS-KYBER
2. CRYSTALS-DILITHIUM
3. 다항식 차수
4. modular
5. Symmetric mod
6. Polynomial ring
