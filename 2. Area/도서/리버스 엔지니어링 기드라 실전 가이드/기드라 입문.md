---
tags:
---
# 기드라란 
* 미국 국가안보국(NSA)에서 개발한 소프트웨어 리버스 엔지니어링 도구
* [Github](https://github.com/NationalSecurityAgency/ghidra)에서 소스코드 배포 중
* 세계 최대 정보보안 컨퍼런스인 Black Hat USA 2019에서도 발표
* Windows, Mac OS, Linux 등 환경에 상관없이 동작
* 주요 기능으로 디스어셈블, 디컴파일, 헤더나 라이브러리 등 표시, 스크립트 분석 등

# 설치
- 기드라가 지원하는 운영 체제 버전
	- Windows 7, 10 (64bit)
	- Linux (64bit, CentOS 7 권장)
	- Mac OS 10.8.3 이후
- 동작에 필요한 하드웨어 요건
	- 메모리: 4GB 이상
	- 1GB 이상의 빈 스토리지
	- 듀얼 모니터 사용 추천
- 동작에 필요한 소프트웨어 요건
	- Java Runtime and Development Kit (JDK) 설치
	- 필요에 따라 JDK의 bin 디렉터리를 OS의 PATH에 추가
---
- 기드라 설정
	1. ZIP 파일을 C:\Ghidra에 압축 해제
	2. 환경 변수 GHIDRA_INSTALL_DIR에 C:\Ghidra\ghidra_11.3_PUBLIC을 설정
		1. 11.3: 노트 작성 기준 최신 버전
		2. Windows 버전: 노트 작성 기준 최신 버전인 Windows 11
	3. Windows에서는 다음과 같이 실행
		- `C: \>set GHIDRA_INSTALL_DIR=C: \Ghidra\ghidra_11.3_PUBLIC`
		- Windows에서는 ghidraRun.bat을 실행
		- Linux나 Mac OS에서는 ghidraRun을 실행
	4. 처음 시작할 때는 User Agreement에 동의
# 프로젝트 설정
- 분석을 하려면 Project라고 하는 작업용 디렉터리를 작성
- 상단 메뉴 바 > File > New Project를 선택해 프로젝트 타입을 설정
	- Non-Shared Project: 보통 많이 사용
	- Shared Project: [[부록(리버스 엔지니어링 기드라 실전 가이드)|부록]]에서 설명
- 프로젝트 디렉터리와 프로젝트 이름을 입력하고 Finish
- 프로젝트를 생성하면 기본 화면 상단에 CodeBrowser와 Version Tracking 버튼이 추가
	- Version Tracking: [[부록(리버스 엔지니어링 기드라 실전 가이드)|부록]]에서 설명

# 분석 파일 임포트
- 분석 대상 파일을 프로젝트 부분으로 드래그 앤 드롭
- 메뉴에서 File > Import File을 선택헤 다이얼로그부터 임포트
### 옵션
- 자동으로 프로그램의 포맷이나 언어가 선택
	- 보통 기드라가 자동 설정한 설정으로 문제가 없음
	- 만약 인식하지 못한 경우 Raw Binary 설정으로 선택됨
- 정정이 필요하면 수동으로 변경 가능

### Analyze
- Import가 종료되면 프로그램 데이터 구조 분석이 가능
- 표시된 프로그램을 더블 클릭 > CodeBrower가 열리고 Analyze할지 확인
	- Yes 버튼을 누르면 옵션 선택 창이 표시
	- 기본 설정으로도 문제는 없음

# CodeBrowser
- Ghidra의 주요 기능인 소프트웨어 리버스 엔지니어링을 수행하기 위한 도구
- 기본적으로 6개의 창이 표시
	- Program Trees: 프로그램을 분석해 Fragment라는 단위로 분할해 표시
		- PE 형식의 파일은 헤더나 섹션으로 분할
	- Symbol Tree: 프로그램 내의 심볼에 관한 정보
	- Data Type Manager: 프로그램 내의 데이터 타입의 정보
	- Listing: 프로그램을 디스어셈블한 결과
	- Decompile: 디스어셈블한 결과를 C 언어로 디컴파일한 결과
	- Console: Ghidra Script 및 Ghidra Extension 출력

### 권장 설정
1. 하이라이트
	- 기본 설정: Listing 창과 Decompile 창에서 마우스 스크롤을 누르면 대상 문자열이 강조
	- 보통 마우스 왼쪽 버튼을 많이 이용하기 때문에 이를 변경
		- 상단 메뉴 > Edit > Tool Options
		- 왼쪽의 탭 중 Listing Fields > Cursor Text Highlight 선택
		- Mouse Button To Activate를 MIDDLE에서 LEFT로 변경
2. 키 바인딩
	- 자주 사용하는 항목을 사용하기 간단한 단축키로 변경
	- Edit > Tool Options > Key Bindings부터 설정
	- 항목을 선택, 하단의 텍스트 상자에서 설정하고자 하는 키 바인딩을 입력
	- 설정된 키 바인딩을 취소하려면 텍스트 상자에서 Enter 또는 Backspace
		- Previous Data Type in
			- History 창에서 이전에 커서가 있던 위치로 돌아감
			- 예시로 Esc를 설정
		- Find References To
			- Listing 창에서 대상 주소를 참조하는 주소 알림 표시
			- 예시로 X를 설정
		- Find References to Symbol
			- Decompile 창에서 대상 주소를 참조하는 주소 알림 표시
			- 예시로 X를 설정
	- 원하는 대로 설정 가능
3. 어셈블리 언어의 행간
	- 기본 설정에서는 디스어셈블 결과의 헥스 코드의 바이트 열을 3행으로 표시
		- 이대로는 디스어셈블한 어셈블리 언어의 행간을 읽기 어려움
		- 1행으로 표시하도록 설정
	- Edit > Tool Options > Listing Fields > Bytes Field > Maximum Lines To Display
		- 3에서 1로 변경
		- 숨겨진 바이트 열은 마우스로 확인 가능

### Listing 창

### Decompile 창

### Symbol Tree 창

### Data Type Manager 창

### Bookmarks 창

### Bytes 창

### Function Graph 창

### 여러 창에서 공통적인 항목
